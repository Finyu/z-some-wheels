
# 1.前期准备

  + 规范：

    + 1.网站整体路由的路径应该和项目内页面文件目录一致


    + 2.每个页面对应的文件或者文件夹内形式保持统一，如组件放在该目录下components文件夹内，  入口统一为：文件夹/index.vue或者路由名称


    + 3.router文件夹和store文件夹最好也同上（题外话）


  + 准备：

    
    + 1.在系统字典里把每个页面对应的组件登记上,然后添加按钮的权限代码 如： add代表增加按钮的code，edit代表编辑类按钮的code等

    + 2.在编辑路由权限页面添加路由，并且和字典的对应组件绑定上

    + 3.在每个路由权限的下面，加上该页面会用到的按钮类code

    + 4.编辑用户角色和用户账号等（自行百度），不同角色有不同的路由权限和该路由下按钮权限

+ 代码：

  + 1.在router文件夹用node原生fs模块读取pages目录，动态生成所有组件的列表（这时候规范的文件目录就很重要，就不用手动编辑啦！），用于和字典的组件对应上

  + 2.用户登录的时候，后端传来权限树，进入页面的时候去1步骤生成的列表找到对应的组件，加载即可

  + 3.权限树每个路由下面应该有角色编辑页面维护好的按钮权限code，将当前页面的按钮code放在当前route的meta下。

  + 4.添加一个全局自定义指令，在渲染按钮的时候，传入该按钮的code然后去当前route => meta检查是否有该code权限，没有则vnode自毁